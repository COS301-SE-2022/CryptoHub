<!DOCTYPE html>
<html>
  <!--dotnet tool install -g Microsoft.Web.LibraryManager.cli-->
  <!--libman install @aspnet/signalr@next -p unpkg -d lib/signalr --files dist/browser/signalr.js-->

  <head>
    <meta charset="UTF-8" />
    <title>SignalR client</title>
  </head>

  <body>
    <div id="connect">
      <p>hello</p>
    </div>
  </body>

  <script src="lib/signalr/dist//browser/signalr.js"></script>

  <script>
    var connect = document.getElementById("connect");

    var hubConnection = new signalR.HubConnectionBuilder()
      .withUrl("http://localhost:7215/messagehub?username=khotso&userId=1")
      .build();

    hubConnection.start().then(function () {
      console.log("do this");

      connect.innerHTML += "<p>started</p>";
    });

    // hubConnection.stop().then(function () {
    //   console.log("Requested stop on hub");
    // });

    // hubConnection.onclose(function () {
    //   console.log("here4");

    //   commsLog.innerHTML +=
    //     "<tr>" +
    //     '<td colspan="3" class="commslog-data">Connection Stopped</td>' +
    //     "</tr>";
    // });

    hubConnection.on("RecievedID", function (connectionID, id) {
      console.log("connection id: " + connectionID);
      connect.innerHTML += "<p>" + connectionID + "</p>";
    });

    // hubConnection.on("RecievedMessage", function (message) {
    //   commsLog.innerHTML +=
    //     "<tr>" +
    //     '<td class="commslog-client">Client</td>' +
    //     '<td class="commslog-server">Server</td>' +
    //     '<td class="commslog-data">' +
    //     message +
    //     "</td></tr>";
    // });
  </script>
</html>
